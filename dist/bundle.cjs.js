"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var _=_interopDefault(require("lodash")),pino=_interopDefault(require("pino")),als=_interopDefault(require("async-local-storage"));function lift(){let t;if(this.config.log=this.config.log||{},!1!==this.config.log.pretty){t=pino.pretty();let e=_.assign({errorProps:["extra"]},this.config.log.pretty);pino.pretty(e),t.pipe(process.stdout)}let e=pino(this.config.log,t);return this.logger=e,e.log=e.info.bind(e),["log","info","warn","error","trace"].forEach(t=>{let o=e[t].bind(e);e[t]=function(...t){als.get("traceId")?t[0]instanceof Error?o(...[...t,als.get("traceId")]):o(...[als.get("traceId"),...t]):o(...t)}}),global.logger=e,global.als=als,e}als.enable(),module.exports=lift;
//# sourceMappingURL=bundle.cjs.js.map
